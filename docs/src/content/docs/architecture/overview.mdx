---
title: Architecture
description: An overview of the architecture of my website.
---

This page provides a high-level overview of the architecture that runs `paultibbetts.uk`.

## Goals

- simple enough to operate myself
- how I'd do it professionally
- boring and reliable
- written as code
- portable
- indie
- Pi?

## Topology

- **DNS**: Cloudflare manages the domain
- **Network**: requests routed via an IPv4 to IPv6 proxy
- **Compute**: Raspberry Pi 4 on an IPv6-only network
- **Workloads**: Web server hosting multiple sites

## Diagram

```d2
direction: down

user: {
  shape: person
}
cf: "Cloudflare" {
  style.stroke-dash: 5
  dns: "DNS" {
    shape: cloud
  }
}

mb: "Mythic Beasts" {
  style.stroke-dash: 5
  proxy: "IPv4 to IPv6 Proxy" {
    shape: hexagon
  }
  pi: "Raspberry Pi 4" {
      shape: rectangle
      web: "Caddy" {
        shape: package
      }
      site: "paultibbetts.uk/" {
        shape: stored_data
      }
  }
}

user <-> cf.dns: "resolve paultibbetts.uk" {
  style.stroke-dash: 5
}
cf.dns -- mb.proxy: "CNAME" {
  style.stroke-dash: 5
}
user <-> mb.proxy: "HTTPS"

mb.proxy <-> mb.pi: "IPv6"
mb.pi.web -> mb.pi.site: "serves"
```

## Automation

- **Hardware**: Terraform is used to configure hardware
- **Software**: Ansible is used to configure software
- **Continuous Deployment**: Git-based automations deploy updates from CI

I manually run Terraform to change the hardware and Ansible to change the software.

A deployment workflow has been added to the website's code so that each time it is changed
a deployment is made to the web server.

## Location

- **Compute**: Raspberry Pi 4 hosted in London, UK

## Redundancy

- None

Not of concern right now.

## Backups

My website uses a static site generator with its content tracked in Git and Infrastructure
as Code means I have a reproducible way of re-creating the infrastructure.

This means I don't need to take any backups of the setup because it's all driven by code.

The code itself is backed up onto my NAS and is also available on GitHub.

## Out of scope

- be horizontally scalable
- redundancy
- self-host everything
- be completely automated
